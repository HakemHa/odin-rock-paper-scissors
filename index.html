<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="https://www.theodinproject.com/mstile-310x310.png" type="image/x-icon">
</head>
<body>
    <main>
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
        <div id="tally">
            <span id="result"></span>
            <div id="scores">
                <p>You: 0</p><p>Computer: 0</p>
            </div>
            <span id="win" style="display: none;"></span>
        </div>
    </main>
    <script>
        function getComputerChoice() {
            const p = Math.random();
            if (p < 0.33) {
                return "rock";
            }
            else if (p < 0.66) {
                return "paper";
            }
            else {
                return "scissors"
            }
        }
        function playRound(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            if (playerSelection === "rock") {
                if (computerSelection === "rock") {
                    return "It's a Tie! Rock ties Rock";
                }
                else if (computerSelection === "paper") {
                    return "You Lose! Paper beats Rock";
                }
                else {
                    return "You Win! Rock beats Scissors";
                }   
            }
            else if (playerSelection === "paper") {
                if (computerSelection === "rock") {
                    return "You Win! Paper beats Rock";
                }
                else if (computerSelection === "paper") {
                    return "It's a Tie! Paper ties Paper";
                }
                else {
                    return "You Lose! Scissors beats Paper";
                }
            }
            else if (playerSelection === "scissors") {
                if (computerSelection === "rock") {
                    return "You Lose! Rock beats Scissors";
                }
                else if (computerSelection === "paper") {
                    return "You Win! Scissors beats Paper";
                }
                else {
                    return "It's a Tie! Scissors ties Scissors";
                }
            }
            else {
                return null;
            }
        }
        let wins = 0;
        let losses = 0;
        let state = null;
        let tally = document.querySelector("#tally");
        let result = document.querySelector('#result');
        let scores = document.querySelector("#scores");
        let win = document.querySelector("#win")
        let btns = document.querySelectorAll('button');
        btns.forEach(btn => btn.addEventListener('click', () => {
            if (wins < 5 && losses < 5) {
                let ans = playRound(btn.id, getComputerChoice());
                result.innerText = ans;
                let i = ans.indexOf('!');
                if (ans.substring(0, i+1) === "You Win!") {
                    wins += 1;
                }
                else if (ans.substring(0, i+1) === "You Lose!") {
                    losses += 1;
                }
                scores.innerHTML = `<p>You: ${wins}</p><p>Computer: ${losses}</p>`;
            }
            else {
                result.innerText = "";
            }
            if (wins === 5 || losses === 5){
                win.style.display = 'inline';
                if (wins === 5) {
                    win.innerText = "You beated the computer!";
                }
                if (losses == 5) {
                    win.innerText = "The computer beated you!";
                }
            }
        }));
    </script>
</body>
</html>